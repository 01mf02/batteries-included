BYTE_ENABLED   = true
NATIVE_ENABLED = true

USE_OCAMLFIND = true

OCAMLDEP_MODULES_ENABLED = false

NAME = aaa
DESTDIR = $(shell $(OCAMLFIND) printconf destdir)

.PHONY: clean
clean:
    rm -f $(filter-proper-targets $(ls R, .))

.SUBDIRS: src

.DEFAULT: all

.PHONY: all
all: src/batteries.cmxa src/batteries.cma

.PHONY: install
install: all
	mkdir -p "$(DESTDIR)"
	$(OCAMLFIND) install $(NAME) -destdir "$(DESTDIR)" build/META \
	src/*.mli src/*.cmi src/*.cma src/*.cmxa

.PHONY: uninstall
uninstall:
	$(OCAMLFIND) remove $(NAME) -destdir "$(DESTDIR)"
